<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!--<title>PROMISES</title>-->
    <title>DATABASES: JSON</title>
</head>
<body>
    <!--<script src="./promises.js"></script>-->
    <!--<script src="./storage.js"></script>-->

    <h1>REGISTRAR ALUMNOS</h1>
    <form method="POST" onSubmit="return false;">
        <input class="js_name" id="js_name" type="text" placeholder="Nombre" required>
        <input class="js_lastname" id="js_lastname" type="text" placeholder="Apellido" required>
        <input class="js_age" id="js_age" type="text" placeholder="Edad" required>
        <button>GUARDAR</button>
    </form>

    <script>
        function registerStudent() {
            const cName = document.getElementById('js_name');
            const cLastName = document.getElementById('js_lastname');
            const cAge = document.getElementById('js_age');
            const cForm = document.querySelector('form');

            cForm.addEventListener('submit', function(element) {
                element.preventDefault();
                const cObject = {
                    name: cName.value,
                    lastname: cLastName.value,
                    age: cAge.value
                };

                fetch('http://localhost:3000/alumnos', {
                    method: 'POST',
                    body: JSON.stringify(cObject),
                    headers: {
                        "Content-type": "application/json; charset=UTF-8"
                    }
                }).then((response) => {
                    return response.json()
                }).then((response) => {
                    console.log('response')
                })
            });
        }

        registerStudent();
    </script>
</body>
</html>